<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<flow name="collector-benefits-metrics-flow" doc:id="cf19ce8b-0e8c-482d-9080-226674d2e203" >
		<ee:transform doc:name="Build Platform Benefits Metrics" doc:id="005e34ed-38c6-4323-b72d-c3a2c2e8c632" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
output application/json


var totalApisReuse = 5
var totalProxies = 10
var totalAPIs = 9
var totalIntegrations = 1
var totalApps = (totalProxies + totalAPIs + totalIntegrations)

var savingFromDeveloperProductivity= (attributes.queryParams.developAPIHistoricTime/attributes.queryParams.developAPICurrentTime) * 100
var savingFromAPIReuse = totalApisReuse * attributes.queryParams.developAPIHistoricTime * attributes.queryParams.developerDayRate 
var savingFromMaintenanceProductivity = (attributes.queryParams.maintainAPIHistoricTime - attributes.queryParams.maintainAPICurrentTime) * totalApps * attributes.queryParams.developerDayRate 
var savingFromReuseInMaintenance = totalApisReuse * attributes.queryParams.maintainAPIHistoricTime * attributes.queryParams.developerDayRate
var totalSavings = savingFromAPIReuse + savingFromMaintenanceProductivity + savingFromReuseInMaintenance
---
{
	savingFromDeveloperProductivity: savingFromDeveloperProductivity, 
	savingFromAPIReuse: savingFromAPIReuse, 
	savingFromMaintenanceProductivity: savingFromMaintenanceProductivity, 
	savingFromReuseInMaintenance: savingFromReuseInMaintenance, 
	totalSavings: totalSavings
}]]></ee:set-payload>
			</ee:message>
		</ee:transform>
	</flow>
</mule>
